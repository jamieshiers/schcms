function FileDragHover(e){e.stopPropagation();e.preventDefault();e.target.className=e.type=="dragover"?"hover":""}function FileSelectHandler(e){FileDragHover(e);var t=e.target.files||e.dataTransfer.files;for(var n=0,r;r=t[n];n++){ParseFile(r);UploadFile(r)}}function ParseFile(e){Output("<p>File information: <strong>"+e.name+"</strong> type: <strong>"+e.type+"</strong> size: <strong>"+e.size+"</strong> bytes</p>");e.type.match("image.jpeg")&&Output('<div class="file_upload"><p><strong>'+e.name+":</strong><br />"+'<img src="/assets/img/icons/jpeg.png"/></p>'+'<div id="progress"></div>'+"</div>");e.type.match("application.pdf")&&Output('<div class="file_upload"><p><strong>'+e.name+":</strong><br />"+'<img src="/assets/img/icons/pdf.png"/></p>'+'<div id="progress"></div>'+"</div>")}function UploadFile(e){var t=new XMLHttpRequest;if(t.upload&&e.type.match("image.*||application.msword||application.pdf")){var n=document.getElementById("progress"),r=n.appendChild(document.createElement("p"));r.appendChild(document.createTextNode("upload "+e.name));t.upload.addEventListener("progress",function(e){var t=parseInt(100-e.loaded/e.total*100);r.style.backgroundPosition=t+"% 0"},!1);t.onreadystatechange=function(e){t.readyState==4&&(r.className=t.status==200?"success":"failure")};t.open("POST","/events/upload",!0);t.setRequestHeader("X_FILENAME",e.name);t.send(e);uploaded.push(e.name);document.forms[0].elements.form_files.value=uploaded}}function Output(e){var t=document.getElementById("messages");t.innerHTML=e+t.innerHTML}function init(){var e=document.getElementById("filedrag"),t=document.getElementById("fileselect"),n=new XMLHttpRequest;if(n.upload){e.addEventListener("dragover",FileDragHover,!1);e.addEventListener("dragleave",FileDragHover,!1);e.addEventListener("drop",FileSelectHandler,!1);e.style.display="block";t.style.display="none";document.forms[0].elements.drag_drop.value=1}}$(document).ready(function(){init()});var uploaded=new Array;